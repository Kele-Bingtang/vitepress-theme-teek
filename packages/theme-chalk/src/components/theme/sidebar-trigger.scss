@use "../../mixins/bem" as *;
@use "../../mixins/config" as *;
@use "../../mixins/function" as *;
@use "../../mixins/mixins" as *;

:root {
  @include set-css-var("sidebar-trigger-offset", 10px);
}

@include b(layout) {
  .VPSidebar {
    transition:
      width getCssVar("transition-duration") ease-in-out,
      padding-left getCssVar("transition-duration") ease-in-out,
      padding-right getCssVar("transition-duration") ease-in-out;
  }

  @include when(sidebar-collapse) {
    .VPSidebar {
      width: 0 !important;
      padding-left: 0 !important;
      padding-right: 0 !important;
    }

    .VPNav {
      border: 1px solid var(--vp-c-divider);
      .VPNavBar.has-sidebar {
        .divider {
          display: none;
        }
      }
    }

    .VPNavBarTitle.has-sidebar {
      > .title {
        border: none;
      }
    }

    // 折叠侧边栏的左侧距离
    @include b(sidebar-trigger) {
      left: getCssVar("sidebar-trigger-offset") !important;
    }
  }

  @include b(sidebar-trigger) {
    position: fixed;
    top: calc(var(--vp-nav-height) + getCssVar("sidebar-trigger-offset"));
    left: calc(
      (100% - (var(--vp-layout-max-width) - 64px)) / 2 + var(--vp-sidebar-width) - 32px +
        getCssVar("sidebar-trigger-offset")
    ) !important;
    transition: left getCssVar("transition-duration") ease-in-out;

    @include when(active) {
      transition-duration: getCssVar("transition-duration");
    }
  }
}

// 适配 4 大主题增强的布局切换生效的样式
html[layout-mode="original"] {
  @include b(sidebar-trigger) {
    left: calc(
      (100% - (var(--vp-layout-max-width) - 64px)) / 2 + var(--vp-sidebar-width) - 32px +
        getCssVar("sidebar-trigger-offset")
    ) !important;
    transition-duration: getCssVar("transition-duration-slow");
  }

  // 适配 pageStyle 配置项生效的样式
  @include multiple-b(((card, card-nav, segment, segment-nav))) {
    @include b(sidebar-trigger) {
      left: calc(var(--vp-sidebar-width) + getCssVar("sidebar-trigger-offset")) !important;
    }

    &.Layout.is-sidebar-collapse {
      @include b(sidebar-trigger) {
        left: getCssVar("sidebar-trigger-offset") !important;
      }
    }
  }
}

html[layout-mode="bothWidthAdjustable"] {
  @include b(sidebar-trigger) {
    left: calc(
      (100% - (getCssVar("page-max-width") - 64px)) / 2 + var(--vp-sidebar-width) - 32px +
        getCssVar("sidebar-trigger-offset")
    ) !important;
    transition-duration: getCssVar("transition-duration-slow");
  }
}

html[layout-mode="sidebarWidthAdjustableOnly"] {
  @include b(sidebar-trigger) {
    left: calc(
      (100% - (getCssVar("page-max-width") - 64px)) / 2 + var(--vp-sidebar-width) - 32px +
        getCssVar("sidebar-trigger-offset")
    ) !important;
    transition-duration: getCssVar("transition-duration-slow");
  }
}

html[layout-mode="fullWidth"] {
  @include b(sidebar-trigger) {
    left: calc(
      (100% - (getCssVar("full-width-max-width") - 64px)) / 2 + var(--vp-sidebar-width) - 32px +
        getCssVar("sidebar-trigger-offset")
    ) !important;
    transition-duration: getCssVar("transition-duration-slow");
  }
}
